<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Delhi</title>
  <style>
    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      font-family: "Courier New", Courier, monospace;
      background: #f9f5f0 url("letter_texture.png") no-repeat center/cover;
      color: #333;
    }

    .photo {
      width: 100%;
      height: 1000px;
      background: #ddd url("delhi.jpg") center/cover no-repeat;
      border-bottom: 2px solid #bbb;
    }

    .letter {
      max-width: 800px;
      width: 90%;
      background: rgba(255, 255, 255, 0.8);
      padding: 20px 30px;
      margin: 20px auto;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
      font-size: 18px;
      line-height: 1.7;
    }

    .line {
      display: inline-block;
      border-right: 3px solid black;
      overflow: hidden;
      white-space: nowrap;
    }

    @keyframes blink {
      50% { border-color: transparent; }
    }
  </style>
</head>
<body>
  <div class="photo"></div>
  <div class="letter" id="letter"></div>



  <script>
    const text = `Delhi, the city you call home. The city that made you the perfect woman you are today. No words do you justice except this one, perfect. When  I first knew you were from Delhi, 
    of course I had the most wrong impressions of you possible, you're from Delgi after all. But you proved that you are so angelic (may I say American), that I felt like an idiot when I got to k
    now you better, know how amazing of a person you are. Then I got to know that you're from AMITY. By then, we were close friends and still I judged you for that (I am so stupid). You proved me 
    wrong yet again. I love that it took my future girlfriend to tell the whole world how idiotic I am. I don't want to be proven as an idiot by anyone else. I love you so much my dear birthday girl,
    mwahh. Have an amazing amazing day. I can't wait to share our future together(hopefully not in Delhi!!)`;

    const letterEl = document.getElementById("letter");
    const words = text.split(" ");
    let currentLine = "";
    const lines = [];

    // Helper: measure line width
    const tester = document.createElement("span");
    tester.style.visibility = "hidden";
    tester.style.whiteSpace = "nowrap";
    tester.style.position = "absolute";
    tester.style.left = "-9999px";
    letterEl.appendChild(tester);

    words.forEach(word => {
      const tryLine = currentLine ? currentLine + " " + word : word;
      tester.textContent = tryLine;
      if (tester.offsetWidth > letterEl.clientWidth - 60) { 
        // commit current line and start new one
        lines.push(currentLine);
        currentLine = word;
      } else {
        currentLine = tryLine;
      }
    });
    if (currentLine) lines.push(currentLine);
    tester.remove();

    // Function to type a line
    function typeLine(line) {
      return new Promise(resolve => {
        const span = document.createElement("span");
        span.className = "line";
        letterEl.appendChild(span);
        letterEl.appendChild(document.createElement("br"));

        let i = 0;
        const cursorBlink = setInterval(() => {
          span.style.borderRight = span.style.borderRight ? "" : "3px solid black";
        }, 500);

        const typer = setInterval(() => {
          span.textContent = line.slice(0, i + 1);
          i++;
          if (i === line.length) {
            clearInterval(typer);
            clearInterval(cursorBlink);
            span.style.borderRight = "none";
            resolve();
          }
        }, 50); // speed per character
      });
    }

    // Sequential typing
    (async function run() {
      for (const line of lines) {
        await typeLine(line);
      }
    })();
  </script>
</body>
</html>

